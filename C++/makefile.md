# makefile

> makefile 关系到了整个工程的编译规则

Makefile 指定了，哪些文件需要先编译，哪些文件需要后编译，哪些文件需要重新编译。Makefile就像一个Shell脚本一样，其中也可以执行操作系统的命令。

+ 自动化编译，提高了软件开发的效率

_`make` 是一个命令工具，是一个解释makefile中指令的命令工具_

_不同厂商的 `make` 各不相同，也有不同的语法，但其本质都是在`文件依赖性`上做文章_

## 编译链接过程

> 源文件首先会生成中间目标文件，再由中间目标文件生成执行文件。在编译时，编译器只检测程序语法，和函数、变量是否被声明。如果函数未被声明，编译器会给出警告。在链接过程中，链接器会在所有Object File中寻找函数的实现。

1. 源代码编译成中间代码文件，.o 或者 .obj， 即 Object File，这个过程叫做编译 compile. 编译检查的是语法正确，函数和变量的声明正确。对于检查函数和变量的声明是否正确，通常要告诉编译器头文件的所在位置，定义应放在C/C++ 中

2. 把 Object File 合成执行文件，这个动作叫做链接 link。 链接时，主要是链接函数和全局变量

 > Makefile 的规则

 ```
 target ... : prerequisites ...
        command
        ...
        ...
 ```
 > target 是一个目标文件，可以是 Object File，也可以是执行文件

 > prerequisites，生成 target 所需要的文件或是目标

 > command 是 make 需要执行的命令
